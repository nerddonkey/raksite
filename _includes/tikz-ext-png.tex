\documentclass[a4paper]{article}

\usepackage[margin=5mm]{geometry}
\usepackage{tikz,pgfplots}
\usetikzlibrary{matrix,arrows,calc,shadows,positioning,patterns,backgrounds}

\usepgfplotslibrary{external} % creates a tight self-contained pdf figure for each tikzpicture
\tikzexternalize % comment out to debug if latex errors: generates the external pdf
\tikzset{external/force remake} % otherwise will use external pdf
%\tikzsetexternalprefix{fig/} % output the pdf to an existing directory (needs to exist)

\tikzset{png export/.style={
	external/system call={
		pdflatex \tikzexternalcheckshellescape
			-halt-on-error -interaction=batchmode -jobname "\image" "\texsource";
		sips -s format png --out "\image.png" "\image.pdf" % sips: scriptable image processing system.
	}}}

\pgfplotsset{compat=1.12}

\tikzset{png export}

\begin{document}
\thispagestyle{empty}

\tikzsetnextfilename{myfigure}

\begin{tikzpicture}
...
\end{tikzpicture}

\end{document}